import { COMMON_ORDERED_DATA_SIZES } from 'constants';

/**
 * @description Calculates size of data and formats it.
 */
export function toSize(data: any, decimals = 2) {
	const { size: byteSize } = new Blob([data]);

	if (byteSize === 0) {
		return '0 Bytes';
	}

	const k = 1024;
	const dm = decimals < 0 ? 0 : decimals;

	const i = Math.floor(Math.log(byteSize) / Math.log(k));

	return parseFloat((byteSize / Math.pow(k, i)).toFixed(dm)) + ' ' + COMMON_ORDERED_DATA_SIZES[i];
}

/**
 * @description Formats plain objects.
 */
export function pretty(obj: Record<string, string>) {
	let s = '';

	for (const k in obj) s += `- \`${k}\` = \`${obj[k] || ' '}\`\n`;

	return s;
}
